import{b as J,c as d,d as K,e as Q,l as X,n as Y,p as Z,t as $,v as ee,w as te}from"./chunk-NOLICJZN.js";import{a as z}from"./chunk-G7FXASOL.js";import"./chunk-ZY66MEJT.js";import{A as q,Ja as D,La as U,O as P,Ra as B,Ta as j,Ua as H,Wa as O,X as k,Ya as W,Z as N,e as L,g as I,h as T,ka as G,la as R,m as V,na as A,y as M}from"./chunk-L2SPN6SO.js";import{$b as u,Db as a,Ob as r,Pb as n,Qb as l,Ub as S,Zb as E,bb as o,gb as y,la as C,lc as s,ma as w,na as _,nc as h,oa as f,pb as F,vb as p,yc as b,zc as v}from"./chunk-EBI22OCP.js";import"./chunk-7CGTOI24.js";var ie=()=>({"minWidth.%":44}),x=i=>({"is-invalid":i});function re(i,m){if(i&1&&(r(0,"c-alert",28),s(1),n()),i&2){let t=u(2);o(),h(" ",t.successMessage," ")}}function ne(i,m){if(i&1&&(r(0,"c-alert",29),s(1),n()),i&2){let t=u(2);o(),h(" ",t.errorMessage," ")}}function oe(i,m){i&1&&(r(0,"div",30),s(1," Username is required "),n())}function ae(i,m){i&1&&(r(0,"div",30),s(1," Username must be at least 3 characters "),n())}function se(i,m){i&1&&(r(0,"div",30),s(1," Password is required "),n())}function ce(i,m){i&1&&(r(0,"div",30),s(1," Password must be at least 6 characters "),n())}function me(i,m){if(i&1){let t=S();r(0,"c-card",11)(1,"c-card-body"),p(2,re,2,1,"c-alert",12)(3,ne,2,1,"c-alert",13),r(4,"form",14),E("ngSubmit",function(){C(t);let c=u();return w(c.onLogin())}),r(5,"h1"),s(6,"Login"),n(),r(7,"p",15),s(8,"Sign In to your account"),n(),r(9,"c-input-group",16)(10,"span",17),_(),l(11,"svg",18),n(),f(),l(12,"input",19),p(13,oe,2,0,"div",20)(14,ae,2,0,"div",20),n(),r(15,"c-input-group",21)(16,"span",17),_(),l(17,"svg",22),n(),f(),l(18,"input",23),p(19,se,2,0,"div",20)(20,ce,2,0,"div",20),n(),r(21,"c-row")(22,"c-col",24)(23,"button",25),s(24),n()(),r(25,"c-col",26)(26,"button",27),s(27," Forgot password? "),n()()()()()()}if(i&2){let t=u();o(2),a("ngIf",t.successMessage),o(),a("ngIf",t.errorMessage),o(),a("formGroup",t.loginForm),o(8),a("ngClass",v(11,x,t.hasError(t.loginForm,"username","required")||t.hasError(t.loginForm,"username","minlength"))),o(),a("ngIf",t.hasError(t.loginForm,"username","required")),o(),a("ngIf",t.hasError(t.loginForm,"username","minlength")),o(4),a("ngClass",v(13,x,t.hasError(t.loginForm,"password","required")||t.hasError(t.loginForm,"password","minlength"))),o(),a("ngIf",t.hasError(t.loginForm,"password","required")),o(),a("ngIf",t.hasError(t.loginForm,"password","minlength")),o(3),a("disabled",t.loading),o(),h(" ",t.loading?"Logging in...":"Login"," ")}}function le(i,m){if(i&1&&(r(0,"c-alert",29),s(1),n()),i&2){let t=u(2);o(),h(" ",t.errorMessage," ")}}function de(i,m){i&1&&(r(0,"div",30),s(1," Email is required "),n())}function pe(i,m){i&1&&(r(0,"div",30),s(1," Please enter a valid email "),n())}function ge(i,m){i&1&&(r(0,"div",30),s(1," Username is required "),n())}function ue(i,m){i&1&&(r(0,"div",30),s(1," Username must be at least 3 characters "),n())}function _e(i,m){i&1&&(r(0,"div",30),s(1," Password is required "),n())}function fe(i,m){i&1&&(r(0,"div",30),s(1," Password must be at least 6 characters "),n())}function ve(i,m){i&1&&(r(0,"div",30),s(1," Please confirm your password "),n())}function he(i,m){i&1&&(r(0,"div",30),s(1," Passwords do not match "),n())}function xe(i,m){if(i&1){let t=S();r(0,"c-card",11)(1,"c-card-body"),p(2,le,2,1,"c-alert",13),r(3,"form",14),E("ngSubmit",function(){C(t);let c=u();return w(c.onRegister())}),r(4,"h1"),s(5,"Register"),n(),r(6,"p",15),s(7,"Create your account"),n(),r(8,"c-input-group",16)(9,"span",17),_(),l(10,"svg",31),n(),f(),l(11,"input",32),p(12,de,2,0,"div",20)(13,pe,2,0,"div",20),n(),r(14,"c-input-group",16)(15,"span",17),_(),l(16,"svg",18),n(),f(),l(17,"input",19),p(18,ge,2,0,"div",20)(19,ue,2,0,"div",20),n(),r(20,"c-input-group",16)(21,"span",17),_(),l(22,"svg",22),n(),f(),l(23,"input",33),p(24,_e,2,0,"div",20)(25,fe,2,0,"div",20),n(),r(26,"c-input-group",21)(27,"span",17),_(),l(28,"svg",22),n(),f(),l(29,"input",34),p(30,ve,2,0,"div",20)(31,he,2,0,"div",20),n(),r(32,"c-row")(33,"c-col",24)(34,"button",35),s(35),n()()()()()()}if(i&2){let t,e=u();o(2),a("ngIf",e.errorMessage),o(),a("formGroup",e.registerForm),o(8),a("ngClass",v(16,x,e.hasError(e.registerForm,"email","required")||e.hasError(e.registerForm,"email","email"))),o(),a("ngIf",e.hasError(e.registerForm,"email","required")),o(),a("ngIf",e.hasError(e.registerForm,"email","email")),o(4),a("ngClass",v(18,x,e.hasError(e.registerForm,"username","required")||e.hasError(e.registerForm,"username","minlength"))),o(),a("ngIf",e.hasError(e.registerForm,"username","required")),o(),a("ngIf",e.hasError(e.registerForm,"username","minlength")),o(4),a("ngClass",v(20,x,e.hasError(e.registerForm,"password","required")||e.hasError(e.registerForm,"password","minlength"))),o(),a("ngIf",e.hasError(e.registerForm,"password","required")),o(),a("ngIf",e.hasError(e.registerForm,"password","minlength")),o(4),a("ngClass",v(22,x,e.hasError(e.registerForm,"confirmPassword","required")||e.registerForm.hasError("passwordMismatch"))),o(),a("ngIf",e.hasError(e.registerForm,"confirmPassword","required")),o(),a("ngIf",e.registerForm.hasError("passwordMismatch")&&((t=e.registerForm.get("confirmPassword"))==null?null:t.touched)),o(3),a("disabled",e.loading),o(),h(" ",e.loading?"Creating...":"Create Account"," ")}}function Ce(i,m){if(i&1){let t=S();r(0,"div")(1,"h2"),s(2,"Sign up"),n(),r(3,"p"),s(4," New to our platform? Create an account to access all features and start predicting sentiment of your text data. "),n(),r(5,"button",36),E("click",function(){C(t);let c=u();return w(c.toggleView())}),s(6," Register Now! "),n()()}i&2&&(o(5),a("active",!0))}function we(i,m){if(i&1){let t=S();r(0,"div")(1,"h2"),s(2,"Login"),n(),r(3,"p"),s(4," Already have an account? Sign in to continue your journey with our sentiment analysis tools. "),n(),r(5,"button",36),E("click",function(){C(t);let c=u();return w(c.toggleView())}),s(6," Login Now! "),n()()}i&2&&(o(5),a("active",!0))}var qe=(()=>{class i{constructor(t,e,c,g){this.fb=t,this.predictionService=e,this.router=c,this.activatedRoute=g,this.isLoginView=!0,this.errorMessage="",this.successMessage="",this.loading=!1,this.loginForm=this.fb.group({username:["",[d.required,d.minLength(3)]],password:["",[d.required,d.minLength(6)]]}),this.registerForm=this.fb.group({email:["",[d.required,d.email]],username:["",[d.required,d.minLength(3)]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator})}ngOnInit(){sessionStorage.getItem("registrationSuccess")&&(this.successMessage="Registration successful! Please login with your new account.",sessionStorage.removeItem("registrationSuccess"))}passwordMatchValidator(t){let e=t.get("password")?.value,c=t.get("confirmPassword")?.value;return e===c?null:{passwordMismatch:!0}}toggleView(){this.isLoginView=!this.isLoginView,this.errorMessage="",this.successMessage=""}onLogin(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loading=!0,this.errorMessage="";let{username:t,password:e}=this.loginForm.value;this.predictionService.login(t,e).subscribe({next:c=>{this.loading=!1;let g=this.activatedRoute.snapshot.queryParams.returnUrl||"/dashboard";this.router.navigateByUrl(g)},error:c=>{this.loading=!1,this.errorMessage=c.message||"Login failed. Please check your credentials."}})}onRegister(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.loading=!0,this.errorMessage="";let{email:t,username:e,password:c}=this.registerForm.value;this.predictionService.register(t,e,c).subscribe({next:g=>{this.loading=!1,this.isLoginView=!0,sessionStorage.setItem("registrationSuccess","true"),this.successMessage="Registration successful! Please login with your new account.",this.registerForm.reset()},error:g=>{this.loading=!1,this.errorMessage=g.message||"Registration failed. Please try again."}})}hasError(t,e,c){let g=t.get(e);return!!(g&&g.touched&&g.hasError(c))}static{this.\u0275fac=function(e){return new(e||i)(y($),y(z),y(q),y(M))}}static{this.\u0275cmp=F({type:i,selectors:[["app-login"]],decls:16,vars:6,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center","mb-4"],[1,"text-center"],["src","assets/brand/emotionary1.svg","alt","Emotionary Logo","height","60","width","240",1,"mb-3",2,"filter","brightness(1)","background-color","white","border-radius","35px"],[1,"text-muted"],[1,"justify-content-center"],["lg","10","xl","8"],["class","p-4",4,"ngIf"],[1,"text-white","bg-primary","py-5",3,"ngStyle"],[4,"ngIf"],[1,"p-4"],["color","success","dismissible","",4,"ngIf"],["color","danger","dismissible","",4,"ngIf"],["cForm","",3,"ngSubmit","formGroup"],[1,"text-body-secondary"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["autoComplete","username","cFormControl","","placeholder","Username","formControlName","username",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["autoComplete","current-password","cFormControl","","placeholder","Password","type","password","formControlName","password",3,"ngClass"],["xs","6"],["cButton","","color","primary","type","submit",1,"px-4",3,"disabled"],["xs","6",1,"text-right"],["cButton","","color","link","type","button","disabled","",1,"px-0"],["color","success","dismissible",""],["color","danger","dismissible",""],[1,"invalid-feedback"],["cIcon","","name","cilEnvelopeClosed"],["autoComplete","email","cFormControl","","placeholder","Email","type","email","formControlName","email",3,"ngClass"],["autoComplete","new-password","cFormControl","","placeholder","Password","type","password","formControlName","password",3,"ngClass"],["autoComplete","new-password","cFormControl","","placeholder","Confirm Password","type","password","formControlName","confirmPassword",3,"ngClass"],["cButton","","color","success","type","submit",1,"px-4",3,"disabled"],["cButton","","color","primary",1,"mt-3",3,"click","active"]],template:function(e,c){e&1&&(r(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3),l(4,"img",4),r(5,"h2",5),s(6,"Sentiment Analysis Platform"),n()()(),r(7,"c-row",6)(8,"c-col",7)(9,"c-card-group"),p(10,me,28,15,"c-card",8)(11,xe,36,24,"c-card",8),r(12,"c-card",9)(13,"c-card-body",3),p(14,Ce,7,1,"div",10)(15,we,7,1,"div",10),n()()()()()()()),e&2&&(o(10),a("ngIf",c.isLoginView),o(),a("ngIf",!c.isLoginView),o(),a("ngStyle",b(5,ie)),o(2),a("ngIf",c.isLoginView),o(),a("ngIf",!c.isLoginView))},dependencies:[H,W,O,A,G,R,D,U,j,P,B,k,T,I,ee,X,J,K,Q,te,Y,Z,N,V,L],encapsulation:2})}}return i})();export{qe as LoginComponent};
