import{q as f,r as k}from"./chunk-L2SPN6SO.js";import{B as u,G as s,U as x,Z as D,ca as T,l,m as c,p as d}from"./chunk-EBI22OCP.js";import{a as _,b as V}from"./chunk-7CGTOI24.js";var b={production:!1,apiUrl:"https://advsofttech-assignment-2.onrender.com"};var H=[{text:"Great customer service experience with your team today!",final_prediction:"Very Positive",confidence:45,sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:7},{name:"Neutral",value:13},{name:"Slightly Positive",value:30},{name:"Very Positive",value:45}],timestamp:new Date("2025-05-20T17:13:00")},{text:"Product arrived damaged and missing parts.",final_prediction:"Very Negative",confidence:42,sentiment_scores:[{name:"Very Negative",value:42},{name:"Slightly Negative",value:28},{name:"Neutral",value:15},{name:"Slightly Positive",value:10},{name:"Very Positive",value:5}],timestamp:new Date("2025-05-20T16:13:00")},{text:"The documentation was clear and helpful.",final_prediction:"Slightly Positive",confidence:38,sentiment_scores:[{name:"Very Negative",value:8},{name:"Slightly Negative",value:12},{name:"Neutral",value:20},{name:"Slightly Positive",value:38},{name:"Very Positive",value:22}],timestamp:new Date("2025-05-20T15:13:00")},{text:"Waiting for my refund for over 2 weeks now.",final_prediction:"Slightly Negative",confidence:35,sentiment_scores:[{name:"Very Negative",value:25},{name:"Slightly Negative",value:35},{name:"Neutral",value:20},{name:"Slightly Positive",value:15},{name:"Very Positive",value:5}],timestamp:new Date("2025-05-20T14:13:00")},{text:"Neutral review, does what it says.",final_prediction:"Neutral",confidence:40,sentiment_scores:[{name:"Very Negative",value:12},{name:"Slightly Negative",value:18},{name:"Neutral",value:40},{name:"Slightly Positive",value:20},{name:"Very Positive",value:10}],timestamp:new Date("2025-05-20T13:13:00")},{text:"The product exceeded my expectations in every way.",final_prediction:"Very Positive",confidence:45,sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:7},{name:"Neutral",value:13},{name:"Slightly Positive",value:30},{name:"Very Positive",value:45}],timestamp:new Date("2025-05-20T12:13:00")},{text:"This was a complete waste of money.",final_prediction:"Very Negative",confidence:42,sentiment_scores:[{name:"Very Negative",value:42},{name:"Slightly Negative",value:28},{name:"Neutral",value:15},{name:"Slightly Positive",value:10},{name:"Very Positive",value:5}],timestamp:new Date("2025-05-20T11:13:00")},{text:"Average product, nothing special but works fine.",final_prediction:"Slightly Positive",confidence:38,sentiment_scores:[{name:"Very Negative",value:8},{name:"Slightly Negative",value:12},{name:"Neutral",value:20},{name:"Slightly Positive",value:38},{name:"Very Positive",value:22}],timestamp:new Date("2025-05-20T10:13:00")},{text:"The customer support team was very responsive.",final_prediction:"Slightly Negative",confidence:35,sentiment_scores:[{name:"Very Negative",value:25},{name:"Slightly Negative",value:35},{name:"Neutral",value:20},{name:"Slightly Positive",value:15},{name:"Very Positive",value:5}],timestamp:new Date("2025-05-20T09:13:00")},{text:"Software is buggy and crashes frequently.",final_prediction:"Neutral",confidence:40,sentiment_scores:[{name:"Very Negative",value:12},{name:"Slightly Negative",value:18},{name:"Neutral",value:40},{name:"Slightly Positive",value:20},{name:"Very Positive",value:10}],timestamp:new Date("2025-05-20T08:13:00")},{text:"Thank you for the prompt delivery!",final_prediction:"Very Positive",confidence:45,sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:7},{name:"Neutral",value:13},{name:"Slightly Positive",value:30},{name:"Very Positive",value:45}],timestamp:new Date("2025-05-20T07:13:00")},{text:"Will definitely recommend to my friends.",final_prediction:"Very Negative",confidence:42,sentiment_scores:[{name:"Very Negative",value:42},{name:"Slightly Negative",value:28},{name:"Neutral",value:15},{name:"Slightly Positive",value:10},{name:"Very Positive",value:5}],timestamp:new Date("2025-05-20T06:13:00")},{text:"Not what I expected based on the description.",final_prediction:"Slightly Positive",confidence:38,sentiment_scores:[{name:"Very Negative",value:8},{name:"Slightly Negative",value:12},{name:"Neutral",value:20},{name:"Slightly Positive",value:38},{name:"Very Positive",value:22}],timestamp:new Date("2025-05-20T05:13:00")}],U=[{id:"csv1",name:"Customer Feedback",isDefault:!1,data:[{text:"The service was exceptional and I'm very satisfied.",final_prediction:"Very Positive",confidence:85,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:3},{name:"Slightly Negative",value:2},{name:"Neutral",value:4},{name:"Slightly Positive",value:6},{name:"Very Positive",value:85}]},{text:"Staff was rude and the product didn't work at all.",final_prediction:"Very Negative",confidence:72,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:72},{name:"Slightly Negative",value:18},{name:"Neutral",value:5},{name:"Slightly Positive",value:3},{name:"Very Positive",value:2}]},{text:"It functions as expected, no issues so far.",final_prediction:"Neutral",confidence:65,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:8},{name:"Neutral",value:65},{name:"Slightly Positive",value:15},{name:"Very Positive",value:7}]},{text:"The online experience could be improved.",final_prediction:"Slightly Negative",confidence:55,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:15},{name:"Slightly Negative",value:55},{name:"Neutral",value:20},{name:"Slightly Positive",value:7},{name:"Very Positive",value:3}]},{text:"I'm mostly happy with my purchase.",final_prediction:"Slightly Positive",confidence:68,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:7},{name:"Neutral",value:10},{name:"Slightly Positive",value:68},{name:"Very Positive",value:10}]},{text:"Product is amazing but delivery was slow.",final_prediction:"Slightly Positive",confidence:62,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:8},{name:"Slightly Negative",value:15},{name:"Neutral",value:5},{name:"Slightly Positive",value:62},{name:"Very Positive",value:10}]},{text:"I returned the item immediately.",final_prediction:"Slightly Negative",confidence:58,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:25},{name:"Slightly Negative",value:58},{name:"Neutral",value:12},{name:"Slightly Positive",value:3},{name:"Very Positive",value:2}]},{text:"It's ok I guess, nothing special.",final_prediction:"Neutral",confidence:70,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:10},{name:"Neutral",value:70},{name:"Slightly Positive",value:10},{name:"Very Positive",value:5}]},{text:"Great value for money, highly recommended!",final_prediction:"Very Positive",confidence:80,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:2},{name:"Slightly Negative",value:3},{name:"Neutral",value:5},{name:"Slightly Positive",value:10},{name:"Very Positive",value:80}]},{text:"The website crashed during checkout.",final_prediction:"Very Negative",confidence:75,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:75},{name:"Slightly Negative",value:15},{name:"Neutral",value:5},{name:"Slightly Positive",value:3},{name:"Very Positive",value:2}]},{text:"Not worth the price I paid.",final_prediction:"Slightly Negative",confidence:60,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:25},{name:"Slightly Negative",value:60},{name:"Neutral",value:10},{name:"Slightly Positive",value:3},{name:"Very Positive",value:2}]},{text:"The shipping was incredibly fast!",final_prediction:"Very Positive",confidence:78,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:2},{name:"Slightly Negative",value:5},{name:"Neutral",value:5},{name:"Slightly Positive",value:10},{name:"Very Positive",value:78}]}],status:"completed",timestamp:new Date("2025-05-18T14:30:00"),chartData:h("Customer Feedback")},{id:"csv2",name:"Product Reviews",isDefault:!1,data:[{text:"This product changed my life!",final_prediction:"Very Positive",confidence:88,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:2},{name:"Slightly Negative",value:2},{name:"Neutral",value:3},{name:"Slightly Positive",value:5},{name:"Very Positive",value:88}]},{text:"It broke after two days of use.",final_prediction:"Very Negative",confidence:76,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:76},{name:"Slightly Negative",value:15},{name:"Neutral",value:5},{name:"Slightly Positive",value:2},{name:"Very Positive",value:2}]},{text:"Works as described, average performance.",final_prediction:"Neutral",confidence:65,timestamp:new Date("2025-05-18T15:00:00"),sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:10},{name:"Neutral",value:65},{name:"Slightly Positive",value:15},{name:"Very Positive",value:5}]}],status:"completed",timestamp:new Date("2025-05-19T09:45:00"),chartData:h("Product Reviews")}],$=[{id:"pending1",name:"large_dataset_processing.csv",timestamp:new Date(Date.now()-15*6e4)},{id:"pending2",name:"financial_predictions_2025.csv",timestamp:new Date(Date.now()-5*6e4)}],A=[{id:"my1",name:"customer_segmentation.csv",status:"completed",timestamp:new Date(Date.now()-2*24*60*6e4),isDefault:!1,data:[{text:"I love your products and will keep buying them!",final_prediction:"Very Positive",confidence:90,sentiment_scores:[{name:"Very Negative",value:2},{name:"Slightly Negative",value:2},{name:"Neutral",value:1},{name:"Slightly Positive",value:5},{name:"Very Positive",value:90}],timestamp:new Date},{text:"Service was average, could be improved.",final_prediction:"Neutral",confidence:62,sentiment_scores:[{name:"Very Negative",value:8},{name:"Slightly Negative",value:15},{name:"Neutral",value:62},{name:"Slightly Positive",value:10},{name:"Very Positive",value:5}],timestamp:new Date},{text:"I was very disappointed with my experience.",final_prediction:"Slightly Negative",confidence:68,sentiment_scores:[{name:"Very Negative",value:20},{name:"Slightly Negative",value:68},{name:"Neutral",value:5},{name:"Slightly Positive",value:5},{name:"Very Positive",value:2}],timestamp:new Date}],chartData:h("Customer Segmentation")},{id:"my2",name:"marketing_campaign_results.csv",status:"completed",timestamp:new Date(Date.now()-1*24*60*6e4),isDefault:!1,data:[{text:"Your promotional email was very informative.",final_prediction:"Slightly Positive",confidence:72,sentiment_scores:[{name:"Very Negative",value:3},{name:"Slightly Negative",value:5},{name:"Neutral",value:10},{name:"Slightly Positive",value:72},{name:"Very Positive",value:10}],timestamp:new Date},{text:"I find these marketing emails annoying.",final_prediction:"Slightly Negative",confidence:65,sentiment_scores:[{name:"Very Negative",value:20},{name:"Slightly Negative",value:65},{name:"Neutral",value:10},{name:"Slightly Positive",value:3},{name:"Very Positive",value:2}],timestamp:new Date}],chartData:h("Marketing Campaign Results")}];function h(o){return{labels:["Very Negative","Slightly Negative","Neutral","Slightly Positive","Very Positive"],datasets:[{label:o+" Sentiment Analysis",backgroundColor:["rgba(220, 53, 69, 0.8)","rgba(255, 193, 7, 0.8)","rgba(108, 117, 125, 0.8)","rgba(13, 202, 240, 0.8)","rgba(25, 135, 84, 0.8)"],borderColor:"rgba(179,181,198,1)",data:[Math.floor(Math.random()*20+5),Math.floor(Math.random()*25+10),Math.floor(Math.random()*30+15),Math.floor(Math.random()*35+10),Math.floor(Math.random()*25+10)]}]}}var N=[...H],p=[...$],y=[...A],M=[...U];function F(o){let r=Math.floor(Math.random()*65)+30,e=R(),t=[{name:"Very Negative",value:Math.floor(Math.random()*25)+5},{name:"Slightly Negative",value:Math.floor(Math.random()*25)+5},{name:"Neutral",value:Math.floor(Math.random()*25)+5},{name:"Slightly Positive",value:Math.floor(Math.random()*25)+5},{name:"Very Positive",value:Math.floor(Math.random()*25)+5}],i=t.findIndex(n=>n.name===e);i>=0&&(t[i].value=r);let a={text:o,final_prediction:e,confidence:r,sentiment_scores:t,timestamp:new Date};return S(a),a}function I(o){let r="file_"+Date.now(),e=new Date,t={id:r,name:o.name,timestamp:e};return p.push(t),setTimeout(()=>{let i=p.findIndex(a=>a.id===r);if(i!==-1){p.splice(i,1);let a={id:r,name:o.name,status:"completed",timestamp:new Date,isDefault:!1,data:[{text:"We love your customer service approach!",final_prediction:"Very Positive",confidence:92,sentiment_scores:[{name:"Very Negative",value:1},{name:"Slightly Negative",value:2},{name:"Neutral",value:1},{name:"Slightly Positive",value:4},{name:"Very Positive",value:92}],timestamp:new Date},{text:"The product is okay but delivery was slow.",final_prediction:"Neutral",confidence:68,sentiment_scores:[{name:"Very Negative",value:5},{name:"Slightly Negative",value:12},{name:"Neutral",value:68},{name:"Slightly Positive",value:10},{name:"Very Positive",value:5}],timestamp:new Date},{text:"I was disappointed with the quality.",final_prediction:"Slightly Negative",confidence:75,sentiment_scores:[{name:"Very Negative",value:15},{name:"Slightly Negative",value:75},{name:"Neutral",value:5},{name:"Slightly Positive",value:3},{name:"Very Positive",value:2}],timestamp:new Date}],chartData:{labels:["Very Negative","Slightly Negative","Neutral","Slightly Positive","Very Positive"],datasets:[{label:"Sentiment Analysis Results",backgroundColor:["rgba(220, 53, 69, 0.8)","rgba(255, 193, 7, 0.8)","rgba(108, 117, 125, 0.8)","rgba(13, 202, 240, 0.8)","rgba(25, 135, 84, 0.8)"],borderColor:"rgba(179,181,198,1)",data:[7,29,25,14,31]}]}};y.push(a),M.push(a)}},8e3),l({fileId:r,name:o.name,timestamp:e}).pipe(s(800))}function E(){return l({pendingFiles:p,completedFiles:y}).pipe(s(600))}function C(o){let r=M.find(t=>t.id===o);if(r)return l(r).pipe(s(700));let e=y.find(t=>t.id===o);return e?l(e).pipe(s(700)):c(()=>new Error("File not found"))}function P(){return l({predictionHistory:N,pendingFiles:p,completedFiles:y}).pipe(s(800))}function S(o){N.some(e=>e.text===o.text&&(e.timestamp instanceof Date&&o.timestamp instanceof Date&&e.timestamp.getTime()===o.timestamp.getTime()||typeof e.timestamp=="string"&&typeof o.timestamp=="string"&&e.timestamp===o.timestamp))||N.unshift({text:o.text,final_prediction:o.final_prediction,confidence:o.confidence,sentiment_scores:o.sentiment_scores||[],timestamp:o.timestamp})}function R(){let o=["Very Positive","Slightly Positive","Neutral","Slightly Negative","Very Negative"];return o[Math.floor(Math.random()*o.length)]}var X=(()=>{class o{constructor(e){this.http=e,this.apiUrl=b.apiUrl||"https://api.yourdomain.com",this.useMockData=!1,this.authToken=null,this.validUsers=[{username:"testuser",password:"password123",email:"test@example.com"},{username:"admin",password:"admin123",email:"admin@example.com"}],this.authToken=localStorage.getItem("authToken")}login(e,t){if(this.useMockData)return this.mockLogin(e,t);let i=`${this.apiUrl}/login`;return this.http.post(i,{username:e,password:t}).pipe(x(a=>{a&&a.token&&(this.authToken=a.token,localStorage.setItem("authToken",a.token),a.user&&a.user.username&&localStorage.setItem("username",a.user.username))}),u(this.handleError))}register(e,t,i){if(this.useMockData)return this.mockRegister(e,t,i);let a=`${this.apiUrl}/signup`;return this.http.post(a,{email:e,username:t,password:i}).pipe(u(this.handleError))}logout(){this.authToken=null,localStorage.removeItem("authToken")}isLoggedIn(){return!!this.authToken}mockLogin(e,t){let i=this.validUsers.find(a=>a.username===e&&a.password===t);if(i){let a=`mock-jwt-token-${Math.random().toString(36).substring(2,15)}`;return this.authToken=a,localStorage.setItem("authToken",a),localStorage.setItem("username",i.username),l({token:a,user:{username:i.username,email:i.email}}).pipe(s(800))}else return c(()=>new Error("Invalid username or password")).pipe(s(800))}mockRegister(e,t,i){return this.validUsers.some(a=>a.username===t)?c(()=>new Error("Username already exists")).pipe(s(800)):this.validUsers.some(a=>a.email===e)?c(()=>new Error("Email already registered")).pipe(s(800)):(this.validUsers.push({username:t,password:i,email:e}),l({success:!0,message:"Registration successful"}).pipe(s(800)))}handleError(e){let t="";return e.error instanceof ErrorEvent?t=`Error: ${e.error.message}`:t=`Error Code: ${e.status}
Message: ${e.message}`,c(()=>new Error(t))}getAuthHeaders(){let e=localStorage.getItem("username")||"";return new f({"Content-Type":"application/json",authToken:`${this.authToken||""}`,username:e})}predictText(e){if(this.useMockData)return l(F(e));let t=`${this.apiUrl}/predict`,i={text:e};return this.http.post(t,i,{headers:this.getAuthHeaders()})}uploadCsvForPrediction(e){if(this.useMockData)return I(e);let t=`${this.apiUrl}/bulk_predict`,i=new FormData;i.append("file",e);let a=localStorage.getItem("username")||"",n=new f({authToken:`${this.authToken||""}`,username:a});return this.http.post(t,i,{headers:n}).pipe(u(this.handleError))}getFiles(){if(this.useMockData)return E();let e=`${this.apiUrl}/files`;return this.http.get(e,{headers:this.getAuthHeaders()})}getFileDetails(e,t){if(this.useMockData)return C(t);let i=`${this.apiUrl}/files/${e}/${t}`;return this.http.get(i,{headers:this.getAuthHeaders()})}getUserData(e){if(this.useMockData)return P().pipe(d(i=>({username:"testuser",email:"test@example.com",totalPredictions:i.predictionHistory?.length||0,totalFiles:i.completedFiles?.length||0,predictionHistory:i.predictionHistory||[],pendingFiles:i.pendingFiles||[],completedFiles:(i.completedFiles||[]).map(a=>V(_({},a),{chartData:this.generateChartDataFromFile(a.data||[]),data:a.data||[]}))})),s(500));let t=`${this.apiUrl}/user-data/${e}`;return this.http.get(t,{headers:this.getAuthHeaders()}).pipe(d(i=>{let a={username:localStorage.getItem("username")||"Unknown",email:"user@example.com",totalPredictions:i.prediction_history?.total_predictions||0,totalFiles:i.completed_files?.total||0,predictionHistory:this.transformPredictionHistory(i.prediction_history?.predictions||[]),pendingFiles:(i.pending_files?.files||[]).map(n=>({id:n.file_id||n.id,name:n.filename?.replace("_pending.csv",".csv")||n.name,timestamp:n.submitted_at||n.timestamp,progress:n.progress||0,status:n.status||"pending"})),completedFiles:(i.completed_files?.files||[]).map(n=>{let g=n.sample_predictions||[];return{id:n.file_id||n.id,name:n.filename?.replace("_completed.csv",".csv")||n.name,timestamp:n.completed_at||n.timestamp,status:n.status||"completed",data:g,chartData:this.generateChartDataFromFile(g)}})};return console.log("Transformed getUserData response:",a),a}),u(this.handleError))}generateChartDataFromFile(e){if(!e||e.length===0)return{labels:[],datasets:[{label:"No Data Available",data:[],backgroundColor:[]}]};let t={},i={};e.forEach(m=>{m.sentiment_scores&&m.sentiment_scores.forEach(w=>{let v=w.name;t[v]||(t[v]=0,i[v]=0),t[v]+=w.value||0,i[v]++})});let a=[],n=[],g=["rgba(220, 53, 69, 0.8)","rgba(255, 193, 7, 0.8)","rgba(108, 117, 125, 0.8)","rgba(13, 202, 240, 0.8)","rgba(25, 135, 84, 0.8)"];return["Negative","Very Negative","Slightly Negative","Neutral","Slightly Positive","Positive","Very Positive"].forEach(m=>{t[m]&&i[m]&&(a.push(m),n.push(Number((t[m]/i[m]).toFixed(2))))}),{labels:a,datasets:[{label:"Average Sentiment Distribution",data:n,backgroundColor:g.slice(0,a.length),borderColor:"rgba(179,181,198,1)",borderWidth:1}]}}transformPredictionHistory(e){return e.map(t=>{let i=t.sentiment_scores?.map(n=>({name:n.name.toLowerCase()==="neutral"?"Neutral":n.name,value:n.value<=1?Number((n.value*100).toFixed(2)):n.value}))||[],a=t.confidence||0;return a<=1&&(a=Number((a*100).toFixed(2))),{text:t.text,final_prediction:t.final_prediction,confidence:a,sentiment_scores:i,timestamp:new Date(t.timestamp||Date.now())}})}savePredictionToHistory(e){this.useMockData&&S(e)}getPredictionHistory(e){if(this.useMockData)return P().pipe(d(i=>({user_id:e,predictions:i.predictionHistory||[],total_predictions:i.predictionHistory?.length||0})),s(500));let t=`${this.apiUrl}/prediction-history/${e}`;return this.http.get(t,{headers:this.getAuthHeaders()}).pipe(d(i=>{let a=this.transformPredictionHistory(i.predictions||[]);return{user_id:i.user_id,predictions:a,total_predictions:i.total_predictions||a.length}}),u(this.handleError))}downloadFile(e,t){if(this.useMockData)return l(new Blob([`mock,data
1,test`],{type:"text/csv"})).pipe(s(800));console.log("Downloading file via API:",{userId:e,fileId:t});let i=`${this.apiUrl}/files/${e}/${t}/download`;return this.http.get(i,{responseType:"blob",headers:this.getAuthHeaders()}).pipe(u(a=>{if(console.error("Download error:",a),a.status===404){console.log("Trying alternative download endpoint...");let n=`${this.apiUrl}/download/${e}/${t}`;return this.http.get(n,{responseType:"blob",headers:this.getAuthHeaders()}).pipe(u(this.handleError))}return this.handleError(a)}))}static{this.\u0275fac=function(t){return new(t||o)(T(k))}}static{this.\u0275prov=D({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{X as a};
